# test_scripts.yaml

---

defaults:
  pinMode: null
  digitalWrite: null
  serial_begin: null
  serial_print_double: 4
  serial_println_double: 4
  serial_println_long: 4
  serial_println_str: 4
  serial_println_ulong: 4
  serial_println_void: 4
  serial_print_long: 4
  serial_print_str: 4
  serial_print_ulong: 4
  serial_available: 0
  delay: null
  TwoWire_begin_void: null
  TwoWire_setClock: null

setup:
  defaults:
    get_EEPROM:
      "0": 78  # 20000
      "1": 32
      "2": 3   # 1000
      "3": 232

  script: |
    < call setup
    > fun_called millis
    < return 100
    > returned

  # interesting things in loop:
  #
  # call switch_closed sw
  # call switch_opened sw
  #
  # <set Encoders enc var value = X>
  # call encoder_changed enc (only if var set and flags not DISABLED)
  #
  # periodics:
  #
  # call notes_on
  # call notes_off
  # call pot_changed pot (calls send_pot if trigger set: Pot_trigger pot == 0xFF
  #                                                      or Triggers[Pot_trigger[pot]].continuous)
  # call send_pot pot

  # get Encoders FUNCTION_ENCODER (0-3 are fn args) encoder_event (when encoder changes)
  #                                                 var (is var set?)
  #                                                 var value
  #                                                 var var_type
  #                                                              var_type_t flags (DISABLED is 1)
  #                                                              var_type_t display_value (event)
  #                                                              <subclass> ...
  #
  # set Switches sw current = 0 or 1
  # get Switch_closed_event sw
  # get Switch_opened_event sw

# vim: sw=2 ic
